!function(t,i){"use strict";t.mbSlider=function(t){return this.config={container:".mb-container",wrapper:".mb-wrapper",itmes:".mb-slide",autoplay:4500,duration:300,direction:"horizontal",isControl:!1,isPages:!1,tapStart:function(){},tapMove:function(){},tapEnd:function(){},aniStart:function(){},aniEnd:function(){},engine:["webkit","ms","o","moz"]},this.init.apply(this,arguments)},mbSlider.prototype={init:function(i){var i=this.setConfig(i);this.container=document.querySelector(i.container),this.wrapper=this.container.querySelector(i.wrapper),this.itmes=this.container.querySelectorAll(i.itmes),this.itemSize=this.itmes.length,this.timer=null,this.boxViewSize=this.getViewSize();var e=this.itmes[this.itemSize-1].cloneNode(!0),n=this.itmes[0].cloneNode(!0);"vertical"==i.direction&&(this.container.className+=" mb-container-vertical",this.setAttributes("flexDirection","column")),i.isPages&&this.showPages(),i.isControl&&this.showControl(),this.autoplay(),this.wrapper.insertBefore(e,this.itmes[0]),this.wrapper.appendChild(n),this.curIndex=-1,this.setMove(),this.bindTouchEvent(),this.bindTransition();var o=this,s=null;this.on(t,"resize",function(){clearTimeout(s),s=setTimeout(function(){o.boxViewSize=o.getViewSize(),o.setState()},150)})},getViewSize:function(){var t=this.container;return"vertical"==this.config.direction?t.clientHeight||t.offsetHeight:t.clientWidth||t.offsetWidth},setMove:function(t){var i=this.config,e=this.curIndex*this.boxViewSize+(t||0);this.duration&&i.aniStart(),this.setAttributes("transform","vertical"==this.config.direction?"translate3d(0px, "+e+"px, 0px)":"translate3d("+e+"px, 0px, 0px)")},bindTransition:function(){for(var t=["webkitTransitionEnd","transitionend","oTransitionEnd otransitionend"],i=this.config,e=0;e<t.length;e++)this.on(this.wrapper,t[e],function(){i.aniEnd()})},setConfig:function(t){for(var i in t)this.config.hasOwnProperty(i)&&(this.config[i]=t[i]);return this.config},setTransitionDuration:function(t){this.duration=t,this.setAttributes("transitionDuration",t+"ms")},setAttributes:function(t,i){for(var e=this.config.engine,n=0;n<e.length;n++)this.wrapper.style[e[n]+this.capitalize(t)]=i;this.wrapper.style[t]=i},capitalize:function(t){return t.substr(0,1).toUpperCase()+t.substr(1)},on:function(t,i,e){return t.addEventListener(i,e,!1)},off:function(t,i,e){return t.removeEventListener(i,e,!1)},stop:function(){clearInterval(this.timer)},setState:function(){var t=this.curIndex,i=this;i.setTransitionDuration(i.config.duration),i.setMove(),(t<-i.itemSize||t>-1)&&(t<-i.itemSize&&(i.curIndex=-1),t>-1&&(i.curIndex=-i.itemSize),i.timer2=setTimeout(function(){i.setTransitionDuration(0),i.setMove(),clearTimeout(i.timer2)},i.config.duration)),i.config.isPages&&(t=Math.abs(i.curIndex%i.itemSize),i.setPagesSelected(0==t?i.itemSize-1:t-1))},autoplay:function(){var t=this;!t.config.autoplay||t.config.autoplay<=t.config.duration||(t.stop(),t.timer=setInterval(function(){t.curIndex-=1,t.setState()},t.config.autoplay))},bindTouchEvent:function(){function t(t){n.stop(),t.preventDefault(),n.setTransitionDuration(0),s="vertical"==a?t.touches[0].clientY:t.touches[0].clientX,n.on(o,"touchmove",i),n.on(o,"touchend",e),n.config.tapStart.call(o,t)}function i(t){t.preventDefault(),r="vertical"==a?t.touches[0].clientY-s:t.touches[0].clientX-s,n.setMove(r),n.config.tapMove.call(o,t)}function e(){Math.abs(r)>=n.boxViewSize/2&&(n.curIndex+=r>0?1:-1),n.setTransitionDuration(n.config.duration),n.setState(),n.autoplay(),n.off(o,"touchmove",i),n.off(o,"touchend",e),n.config.tapEnd.call(o)}var n=this,o=this.container,s=0,r=0,a=this.config.direction;this.on(o,"touchstart",t)},getCurIndex:function(){return this.curIndex},getItemSize:function(){return this.itemSize},setPagesSelected:function(t){t=t||0;for(var i=0;i<this.itemSize;i++)this.aPages[i].className="";this.aPages[t].className="active"},showPages:function(){for(var t=document.createElement("div"),i=[],e=0;e<this.itemSize;e++)i.push('<a href="javascript:;"></a>');t.className="mb-pager",t.innerHTML=i.join(""),this.container.appendChild(t),this.aPages=t.querySelectorAll("a"),this.setPagesSelected(),this.bindPagesEvent()},bindPagesEvent:function(){for(var t=this,i=function(i){i.preventDefault(),i.stopPropagation(),t.stop(),t.setPagesSelected(this.index),t.curIndex=-(this.index+1),t.setTransitionDuration(t.config.duration),t.setState(),t.autoplay()},e=0;e<this.itemSize;e++)this.aPages[e].index=e,this.on(this.aPages[e],"touchstart",i)},showControl:function(){var t=document.createElement("div"),i=['<a href="javascript:;" class="mb-control mb-control-pre"></a>','<a href="javascript:;" class="mb-control mb-control-next"></a>'];t.innerHTML=i.join(""),this.container.appendChild(t),this.preControl=t.querySelector(".mb-control-pre"),this.nextControl=t.querySelector(".mb-control-next"),this.bindControlEvent()},now:function(){return new Date-0},bindControlEvent:function(){var t=this,i=0,e=function(e,n){e.stopPropagation(),e.preventDefault(),t.now()-i<t.config.duration||(i=t.now(),t.curIndex+=n>0?1:-1,t.stop(),t.setState(),t.autoplay())};this.on(this.preControl,"touchstart",function(i){e(i,t.boxViewSize)}),this.on(this.nextControl,"touchstart",function(i){e(i,-t.boxViewSize)})}}}(window),"undefined"!=typeof module?module.exports=window.mbSlider:"function"==typeof define&&define.amd&&define([],function(){"use strict";return window.mbSlider});